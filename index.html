<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiple Zeta Value Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/bignumber.js/bignumber.min.js"></script>
    <style>
        /* 全体のフォントを Consolas に設定 */
        body {
            font-family: Consolas, monospace;
        }

        /* ボタンのフォントを Consolas に設定 */
        button {
            font-family: Consolas, monospace;
        }

        /* 入力フィールドのフォントを Consolas に設定 */
        input {
            font-family: Consolas, monospace;
        }

        /* 結果のフォントを Consolas に設定 */
        #result {
            font-family: Consolas, monospace;
        }
    </style>
</head>
<body>
    <h1>Multiple Zeta Value Calculator</h1>
    <form id="inputForm">
        <label for="input_a">s1 :</label>
        <input type="number" id="input_a" min="0" value="2"><br>
        <label for="input_b">s2 :</label>
        <input type="number" id="input_b" min="0" value="3"><br>
        <label for="input_c">s3 :</label>
        <input type="number" id="input_c" min="0" value="0"><br>
        <label for="input_d">s4 :</label>
        <input type="number" id="input_d" min="0" value="0"><br>
        <label for="input_e">s5 :</label>
        <input type="number" id="input_e" min="0" value="0"><br>
        <label for="input_f">s6 :</label>
        <input type="number" id="input_f" min="0" value="0"><br>
        <label for="input_g">s7 :</label>
        <input type="number" id="input_g" min="0" value="0"><br>
        <label for="input_h">s8 :</label>
        <input type="number" id="input_h" min="0" value="0"><br>
        <label for="input_i">s9 :</label>
        <input type="number" id="input_i" min="0" value="0"><br>
        <label for="input_j">s10:</label>
        <input type="number" id="input_j" min="0" value="0"><br>
        <label for="input_k">precision:</label>
        <input type="number" id="input_k" min="20" value="512"><br>
    </form>
    <button onclick="calculate()">Calculate</button>
    <p id="result"></p>

    <script>
        function fib(n){
            let Fibarray = new Array(n+1);

            Fibarray[0] = new BigNumber(1);
            Fibarray[1] = new BigNumber(1);
            for(let y0 = 2; y0 < n; y0++){
                Fibarray[y0] = Fibarray[y0 - 1].plus(Fibarray[y0 - 2]);
            }

            return Fibarray;
        }

        function calculate() {
            var inputs = document.getElementById("inputForm").getElementsByTagName("input");
            var results = [];

            let d = 2;//配列の次元
            let n = inputs[10].value;//精度(配列の大きさ)
            let p=0;
            let flag=0;
            for(p = 0; p < 10; p++){
                if(inputs[p].value != 0){
                    flag++;
                }
            }

            d = flag;

            let Fibarray = fib(n);
            //Fibarrayが完成する
            if(d === 1){//1次元配列の時
                let i1=0;
                let y1;
                let d1;
                
                let s1 = inputs[0].value;

                let sum = new BigNumber(0);
                for(i1 = 1; i1 <= n; i1++){
                    y1 = Fibarray[i1-1].pow(s1);    //F_i1 ^ s1
                    d1 = new BigNumber(1).dividedBy(y1);
                    sum = sum.plus(d1);
                }
                results.push(sum.toString());
            }

            if(d === 2){//2次元配列の時

                let y1=0;
                let y2=0;
                let y3;
                let y4;
                let y5;
                let s1 = inputs[0].value;
                let s2 = inputs[1].value;
                let sum = new BigNumber(0);
                for(y1 = 1; y1 <= n; y1++){
                    for(y2 = y1 + 1; y2 <= n; y2++){
                        y3 = Fibarray[y1-1].pow(s1);    //F_y1 ^ s1
                        y4 = Fibarray[y2-1].pow(s2);    //F_y2 ^ s2
                        y5 = y3.times(y4);
                        y5 = new BigNumber(1).dividedBy(y5);
                        sum = sum.plus(y5);
                    }
                }
                results.push(sum.toString());

            }else if(d === 3){//3次元配列の時

                let i1=0;
                let i2=0;
                let i3=0;
                let y1;
                let y2;
                let y3;
                let d1;
                
                let s1 = inputs[0].value;
                let s2 = inputs[1].value;
                let s3 = inputs[2].value;

                let sum = new BigNumber(0);
                for(i1 = 1; i1 <= n; i1++){
                    for(i2 = i1 + 1; i2 <= n; i2++){
                        for(i3 = i2 + 1; i3 <= n; i3++){
                            y1 = Fibarray[i1-1].pow(s1);    //F_i1 ^ s1
                            y2 = Fibarray[i2-1].pow(s2);    //F_i2 ^ s2
                            y2 = Fibarray[i3-1].pow(s3);    //F_i2 ^ s2
                            d1 = y1.times(y2);
                            d1 = d1.times(y3);
                            d1 = new BigNumber(1).dividedBy(d1);
                            sum = sum.plus(d1);
                        }
                    }
                }
                results.push(sum.toString());
            }

            var resultString = "";
            for (var i = 0; i < results.length; i++) {
                resultString += "ζ_F(s1,s2,s3,s4,s5,s6,s7,s8,s9,s10)" + "<br>" + " = " + results[i] + "<br>";
            }
            document.getElementById("result").innerHTML = resultString;
        }
    </script>
</body>
</html>
